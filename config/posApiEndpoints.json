[
  {
    "id": "saveReceipt",
    "name": "Save B2C/B2B Receipt",
    "category": "Receipts & Invoices",
    "method": "POST",
    "path": "/rest/receipt",
    "parameters": [],
    "posApiType": "B2C_RECEIPT",
    "usage": "transaction",
    "defaultForForm": true,
    "supportsItems": true,
    "supportsMultipleReceipts": true,
    "supportsMultiplePayments": true,
    "receiptTypes": [
      "B2C_RECEIPT",
      "B2B_RECEIPT",
      "B2C_INVOICE",
      "B2B_INVOICE",
      "STOCK_QR"
    ],
    "paymentMethods": [
      "CASH",
      "PAYMENT_CARD",
      "BANK_TRANSFER",
      "MOBILE_WALLET",
      "EASY_BANK_CARD",
      "SERVICE_PAYMENT"
    ],
    "notes": "Handles goods and service transactions. Include item rows for goods or leave the items array empty for service-only receipts.",
    "requestBody": {
      "schema": {
        "branchNo": "001",
        "posNo": "001",
        "merchantTin": "37900846788",
        "type": "B2C_RECEIPT",
        "taxType": "VAT_ABLE",
        "consumerNo": "10038071",
        "customerTin": null,
        "totalAmount": 15100,
        "totalVAT": 500,
        "totalCityTax": 100,
        "receipts": [
          {
            "taxType": "VAT_ABLE",
            "totalAmount": 5600,
            "totalVAT": 500,
            "totalCityTax": 100,
            "items": [
              {
                "name": "Талх",
                "barCode": "19059010880001",
                "barCodeType": "GS1",
                "classificationCode": "2349010",
                "taxProductCode": null,
                "measureUnit": "ш",
                "qty": 1,
                "unitPrice": 5000,
                "totalAmount": 5600,
                "totalVAT": 500,
                "totalCityTax": 100
              }
            ]
          },
          {
            "taxType": "VAT_ZERO",
            "totalAmount": 7000,
            "totalVAT": 0,
            "items": []
          },
          {
            "taxType": "NO_VAT",
            "totalAmount": 2500,
            "totalVAT": 0,
            "items": [
              {
                "name": "Засвар үйлчилгээ",
                "qty": 1,
                "unitPrice": 2500,
                "totalAmount": 2500
              }
            ]
          }
        ],
        "payments": [
          {
            "code": "CASH",
            "status": "PAID",
            "paidAmount": 4000
          },
          {
            "code": "PAYMENT_CARD",
            "status": "PAID",
            "paidAmount": 600,
            "data": {
              "terminalID": "11111",
              "rrn": "123456789123",
              "maskedCardNumber": "123456XXXXXX7890",
              "easy": true
            }
          },
          {
            "code": "PAYMENT_CARD",
            "status": "PAID",
            "paidAmount": 1000,
            "data": {
              "terminalID": "111",
              "rrn": "123456789121",
              "maskedCardNumber": "123456XXXXXX7891",
              "easy": false
            }
          },
          {
            "code": "BANK_TRANSFER",
            "status": "PENDING",
            "paidAmount": 9500,
            "reference": "BT2024-0001"
          }
        ]
      },
      "description": "Batch of receipts with payments and items grouped by tax type"
    },
    "requestFields": [
      {
        "field": "type",
        "required": true,
        "description": "POSAPI payload type (B2C_RECEIPT, B2B_RECEIPT, B2C_INVOICE, B2B_INVOICE, STOCK_QR)."
      },
      {
        "field": "taxType",
        "required": true,
        "description": "Default tax type for the payload (VAT_ABLE, VAT_FREE, VAT_ZERO, NO_VAT)."
      },
      {
        "field": "branchNo",
        "required": true,
        "description": "Three digit branch identifier issued with the licence."
      },
      {
        "field": "posNo",
        "required": true,
        "description": "POS terminal identifier registered with the tax authority."
      },
      {
        "field": "merchantTin",
        "required": true,
        "description": "Registered TIN of the merchant submitting the receipt."
      },
      {
        "field": "consumerNo",
        "required": false,
        "description": "Citizen registry or phone number for B2C receipts. Required when type is B2C."
      },
      {
        "field": "customerTin",
        "required": false,
        "description": "Buyer TIN for B2B receipts. Required when type is B2B."
      },
      {
        "field": "totalAmount",
        "required": true,
        "description": "Total invoice amount including tax."
      },
      {
        "field": "totalVAT",
        "required": true,
        "description": "VAT amount for the transaction when taxType is VAT_ABLE."
      },
      {
        "field": "totalCityTax",
        "required": false,
        "description": "City tax amount for VAT_ABLE receipts when applicable."
      },
      {
        "field": "receipts[]",
        "required": true,
        "description": "Array of receipt groups organised by POSAPI tax type."
      },
      {
        "field": "receipts[].items[]",
        "required": false,
        "description": "Line items that include product codes, quantities, prices, and tax data. Leave empty when submitting services."
      },
      {
        "field": "payments[]",
        "required": true,
        "description": "Breakdown of payment methods applied to the receipt or invoice."
      },
      {
        "field": "payments[].type",
        "required": true,
        "description": "Payment method code. Supported values: CASH, PAYMENT_CARD, BANK_TRANSFER, MOBILE_WALLET, EASY_BANK_CARD, SERVICE_PAYMENT."
      },
      {
        "field": "payments[].amount",
        "required": true,
        "description": "Amount paid with the selected payment method."
      }
    ],
    "responseBody": {
      "schema": {
        "status": "SUCCESS",
        "message": "Receipt registered",
        "receipts": [
          {
            "billId": "2024-000123",
            "lottery": "АБ12345678",
            "qrData": "https://posapi-test.tax.gov.mn/verify/...",
            "receiptNumbers": [
              "12345678"
            ],
            "errors": []
          }
        ]
      },
      "description": "Receipt submission response"
    },
    "responseFields": [
      {
        "field": "status",
        "description": "Execution status returned by POSAPI (SUCCESS or ERROR)."
      },
      {
        "field": "message",
        "description": "Human-readable description of the operation result."
      },
      {
        "field": "receipts[].billId",
        "description": "Unique bill identifier registered by POSAPI."
      },
      {
        "field": "receipts[].lottery",
        "description": "Lottery number to be printed on the receipt."
      },
      {
        "field": "receipts[].qrData",
        "description": "QR payload containing encoded receipt verification data."
      },
      {
        "field": "receipts[].receiptNumbers[]",
        "description": "List of receipt numbers assigned per tax authority rules."
      }
    ],
    "fieldDescriptions": {
      "type": "POSAPI payload type (B2C_RECEIPT, B2B_RECEIPT, B2C_INVOICE, B2B_INVOICE, STOCK_QR).",
      "taxType": "Overall tax category for the header (VAT_ABLE, VAT_FREE, VAT_ZERO, NO_VAT).",
      "branchNo": "Three digit branch identifier issued with the licence.",
      "posNo": "POS terminal identifier registered with the tax authority.",
      "merchantTin": "Registered TIN of the merchant submitting the receipt.",
      "consumerNo": "Citizen registry or phone number for B2C receipts.",
      "customerTin": "Buyer TIN for B2B receipts.",
      "totalAmount": "Total invoice amount including tax.",
      "totalVAT": "VAT amount for the transaction when taxType is VAT_ABLE.",
      "totalCityTax": "City tax amount when applicable to VAT_ABLE receipts.",
      "receipts": "Groups of line items organised by POSAPI tax type.",
      "receipts[].taxType": "Tax type for this group (VAT_ABLE, VAT_FREE, VAT_ZERO, NO_VAT).",
      "receipts[].totalAmount": "Amount for this tax group including tax.",
      "receipts[].totalVAT": "VAT total for this group when taxType is VAT_ABLE.",
      "receipts[].items": "Line items with product and tax information for this group.",
      "receipts[].items[].classificationCode": "Unified product/service classification code.",
      "receipts[].items[].taxProductCode": "Reason code for VAT_FREE/VAT_ZERO items.",
      "payments": "Breakdown of how the receipt or invoice was paid.",
      "payments[].type": "Payment method code (type/code). Supported values: CASH, PAYMENT_CARD, BANK_TRANSFER, MOBILE_WALLET, EASY_BANK_CARD, SERVICE_PAYMENT.",
      "payments[].status": "Payment status (PAID, PENDING, CANCELLED).",
      "payments[].paidAmount": "Amount paid with the selected payment method. Also accepted as amount in legacy payloads.",
      "payments[].amount": "Legacy alias for paidAmount.",
      "payments[].data": "Card metadata envelope when submitting PAYMENT_CARD entries.",
      "payments[].data.terminalID": "Card terminal identifier provided by the bank.",
      "payments[].data.rrn": "Retrieval reference number returned by the acquiring bank.",
      "payments[].data.maskedCardNumber": "Masked primary account number used for settlement.",
      "payments[].data.easy": "Boolean flag indicating whether Easy Bank card auto-confirmation applies."
    },
    "mappingHints": {
      "topLevelFields": [
        {
          "field": "type",
          "required": true,
          "description": "POSAPI document type column (B2C_RECEIPT, B2B_RECEIPT, B2C_INVOICE, B2B_INVOICE, STOCK_QR)."
        },
        {
          "field": "totalAmount",
          "required": true,
          "description": "Total invoice amount including taxes."
        },
        {
          "field": "totalVAT",
          "required": true,
          "description": "Total VAT amount for VAT_ABLE transactions."
        },
        {
          "field": "totalCityTax",
          "required": false,
          "description": "City tax amount for VAT_ABLE receipts when applicable."
        },
        {
          "field": "taxType",
          "required": true,
          "description": "Overall tax type for the receipt payload."
        },
        {
          "field": "branchNo",
          "required": true,
          "description": "Three digit branch identifier issued with the licence."
        },
        {
          "field": "posNo",
          "required": true,
          "description": "Registered POS terminal identifier."
        },
        {
          "field": "merchantTin",
          "required": true,
          "description": "Registered TIN of the merchant submitting the receipt."
        },
        {
          "field": "consumerNo",
          "required": false,
          "description": "Citizen registry or phone number for B2C receipts."
        },
        {
          "field": "customerTin",
          "required": false,
          "description": "Buyer TIN for B2B receipts."
        }
      ],
      "itemFields": [
        {
          "field": "name",
          "required": true,
          "description": "Item name printed on the receipt."
        },
        {
          "field": "qty",
          "required": true,
          "description": "Quantity sold for the line item."
        },
        {
          "field": "price",
          "required": true,
          "description": "Unit price of the item before tax."
        },
        {
          "field": "totalAmount",
          "required": true,
          "description": "Extended amount for the line item including tax."
        },
        {
          "field": "totalVAT",
          "required": false,
          "description": "VAT portion attributed to the line item."
        },
        {
          "field": "totalCityTax",
          "required": false,
          "description": "City tax portion attributed to the line item."
        },
        {
          "field": "taxType",
          "required": false,
          "description": "Specific tax type override for the item when different from the header."
        },
        {
          "field": "classificationCode",
          "required": true,
          "description": "Unified classification code for the good."
        },
        {
          "field": "taxProductCode",
          "required": false,
          "description": "Tax product or exemption reason code when required by POSAPI."
        },
        {
          "field": "barCode",
          "required": false,
          "description": "Barcode identifier for the item."
        },
        {
          "field": "measureUnit",
          "required": false,
          "description": "Measurement unit for the item quantity."
        }
      ],
      "receiptGroups": [
        {
          "type": "VAT_ABLE",
          "fields": [
            {
              "field": "totalAmount",
              "required": true,
              "description": "Total amount for VAT-able sales."
            },
            {
              "field": "totalVAT",
              "required": true,
              "description": "VAT amount for VAT-able sales."
            },
            {
              "field": "totalCityTax",
              "required": false,
              "description": "City tax amount associated with the VAT-able group."
            },
            {
              "field": "taxType",
              "required": false,
              "description": "Override tax type when the column provides it."
            }
          ]
        },
        {
          "type": "VAT_FREE",
          "fields": [
            {
              "field": "totalAmount",
              "required": false,
              "description": "Total amount for VAT-free sales."
            },
            {
              "field": "taxType",
              "required": false,
              "description": "Optional override for the VAT-free tax type."
            }
          ]
        },
        {
          "type": "VAT_ZERO",
          "fields": [
            {
              "field": "totalAmount",
              "required": false,
              "description": "Total amount for VAT zero-rated sales."
            },
            {
              "field": "taxType",
              "required": false,
              "description": "Optional override for the zero-rated tax type."
            }
          ]
        },
        {
          "type": "NO_VAT",
          "fields": [
            {
              "field": "totalAmount",
              "required": false,
              "description": "Total amount for non-VAT sales."
            },
            {
              "field": "taxType",
              "required": false,
              "description": "Optional override for the non-VAT tax type."
            }
          ]
        }
      ],
      "paymentMethods": [
        {
          "method": "CASH",
          "fields": [
            {
              "field": "paidAmount",
              "required": true,
              "description": "Cash amount paid."
            },
            {
              "field": "status",
              "required": false,
              "description": "Payment status flag for audit tracking."
            },
            {
              "field": "status",
              "required": false,
              "description": "Status flag for the bank transfer."
            },
            {
              "field": "reference",
              "required": false,
              "description": "Optional cash payment reference or slip number."
            }
          ]
        },
        {
          "method": "PAYMENT_CARD",
          "fields": [
            {
              "field": "paidAmount",
              "required": true,
              "description": "Card payment amount."
            },
            {
              "field": "status",
              "required": true,
              "description": "Card payment status (PAID is required for settlement)."
            },
            {
              "field": "status",
              "required": false,
              "description": "Wallet payment status."
            },
            {
              "field": "reference",
              "required": false,
              "description": "Card authorisation or reference number."
            },
            {
              "field": "data.terminalID",
              "required": false,
              "description": "Terminal identifier supplied by the acquiring bank."
            },
            {
              "field": "data.rrn",
              "required": false,
              "description": "Retrieval reference number returned with the card transaction."
            },
            {
              "field": "data.maskedCardNumber",
              "required": false,
              "description": "Masked card number printed on the receipt."
            },
            {
              "field": "data.easy",
              "required": false,
              "description": "Flag indicating Easy Bank auto-confirmation."
            }
          ]
        },
        {
          "method": "BANK_TRANSFER",
          "fields": [
            {
              "field": "paidAmount",
              "required": false,
              "description": "Amount settled by bank transfer."
            },
            {
              "field": "status",
              "required": false,
              "description": "Status flag for the bank transfer."
            },
            {
              "field": "reference",
              "required": false,
              "description": "Bank transaction reference."
            }
          ]
        },
        {
          "method": "MOBILE_WALLET",
          "fields": [
            {
              "field": "paidAmount",
              "required": false,
              "description": "Amount charged to the mobile wallet."
            },
            {
              "field": "status",
              "required": false,
              "description": "Wallet payment status."
            },
            {
              "field": "status",
              "required": false,
              "description": "Wallet transaction reference."
            }
          ]
        },
        {
          "method": "EASY_BANK_CARD",
          "fields": [
            {
              "field": "paidAmount",
              "required": false,
              "description": "Amount paid with Easy Bank card."
            },
            {
              "field": "status",
              "required": false,
              "description": "Reference for the Easy Bank card payment."
            }
          ]
        }
      ],
      "nestedPaths": {
        "receipts": "receipts",
        "items": "receipts[].items",
        "payments": "payments"
      }
    },
    "testable": true,
    "testServerUrl": "https://posapi-test.tax.gov.mn"
  },
  {
    "id": "verifyCustomerTin",
    "name": "Verify customer TIN",
    "category": "Reference data",
    "method": "GET",
    "path": "/rest/verifyCustomerTin",
    "parameters": [
      {
        "name": "customerTin",
        "in": "query",
        "required": true,
        "description": "Customer tax identification number to validate."
      }
    ],
    "usage": "info",
    "requestBody": {
      "schema": {},
      "description": "TIN validation is performed via query parameters."
    },
    "requestFields": [
      {
        "field": "customerTin",
        "required": true,
        "description": "Customer tax identification number to validate."
      }
    ],
    "responseBody": {
      "schema": {
        "valid": true,
        "name": "Acme LLC",
        "status": "ACTIVE"
      },
      "description": "Indicates whether the provided TIN is valid and the registered entity name."
    },
    "responseFields": [
      {
        "field": "valid",
        "description": "Boolean flag indicating if the TIN is valid."
      },
      {
        "field": "name",
        "description": "Registered entity name when available."
      },
      {
        "field": "status",
        "description": "Tax authority status for the entity (e.g., ACTIVE)."
      }
    ],
    "fieldDescriptions": {
      "valid": "Boolean flag indicating if the TIN is valid.",
      "name": "Registered entity name when available.",
      "status": "Tax authority status for the entity (e.g., ACTIVE)."
    },
    "testable": true,
    "testServerUrl": "https://posapi-test.tax.gov.mn"
  },
  {
    "id": "getInformation",
    "name": "List pending receipts",
    "category": "Monitoring",
    "method": "GET",
    "path": "/rest/getInformation",
    "parameters": [
      {
        "name": "startDate",
        "in": "query",
        "required": false,
        "description": "Filter results starting from this date (YYYY-MM-DD)."
      },
      {
        "name": "endDate",
        "in": "query",
        "required": false,
        "description": "Filter results until this date (YYYY-MM-DD)."
      },
      {
        "name": "page",
        "in": "query",
        "required": false,
        "description": "Page number when paginating long-running queues."
      }
    ],
    "usage": "info",
    "requestBody": {
      "schema": {},
      "description": "No request body required for GET endpoints."
    },
    "requestFields": [
      {
        "field": "startDate",
        "required": false,
        "description": "Optional filter for the queue start date (YYYY-MM-DD)."
      },
      {
        "field": "endDate",
        "required": false,
        "description": "Optional filter for the queue end date (YYYY-MM-DD)."
      },
      {
        "field": "page",
        "required": false,
        "description": "Page number for paginated responses."
      }
    ],
    "responseBody": {
      "schema": {
        "status": "SUCCESS",
        "receipts": [
          {
            "billId": "2024-000124",
            "lottery": "АБ12345679",
            "amount": 65000,
            "status": "QUEUED",
            "createdDate": "2024-04-12T14:21:00+08:00"
          }
        ]
      },
      "description": "Receipts queued on the POSAPI server awaiting acknowledgement."
    },
    "responseFields": [
      {
        "field": "status",
        "description": "Execution status returned by POSAPI."
      },
      {
        "field": "receipts[].billId",
        "description": "Queued receipt identifier."
      },
      {
        "field": "receipts[].status",
        "description": "POSAPI queue status such as QUEUED or SENT."
      },
      {
        "field": "receipts[].amount",
        "description": "Total amount of the queued receipt."
      },
      {
        "field": "receipts[].createdDate",
        "description": "Date the receipt was created or queued."
      }
    ],
    "fieldDescriptions": {
      "status": "Execution status returned by POSAPI.",
      "receipts": "List of receipts that are pending on the POSAPI server.",
      "receipts[].billId": "Queued receipt identifier.",
      "receipts[].status": "POSAPI queue status such as QUEUED or SENT.",
      "receipts[].amount": "Total amount of the queued receipt.",
      "receipts[].createdDate": "Date the receipt was created or queued."
    },
    "testable": true,
    "testServerUrl": "https://posapi-test.tax.gov.mn"
  },
  {
    "id": "getDistrictCodes",
    "name": "Load district codes",
    "category": "Reference data",
    "method": "GET",
    "path": "/rest/getDistrictCode",
    "parameters": [],
    "usage": "info",
    "requestBody": {
      "schema": {},
      "description": "No request body required for this lookup."
    },
    "requestFields": [],
    "responseBody": {
      "schema": {
        "districts": [
          {
            "code": "1512",
            "name": "Sukhbaatar district",
            "city": "Ulaanbaatar"
          }
        ]
      },
      "description": "Reference list of tax districts."
    },
    "responseFields": [
      {
        "field": "districts[]",
        "description": "Array of available district codes."
      },
      {
        "field": "districts[].code",
        "description": "District code used when registering receipts."
      },
      {
        "field": "districts[].name",
        "description": "Human-readable district name."
      },
      {
        "field": "districts[].city",
        "description": "City or province that owns the district."
      }
    ],
    "fieldDescriptions": {
      "districts": "Array of available district codes.",
      "districts[].code": "District code used when registering receipts.",
      "districts[].name": "Human-readable district name.",
      "districts[].city": "City or province that owns the district."
    },
    "testable": true,
    "testServerUrl": "https://posapi-test.tax.gov.mn"
  },
  {
    "id": "getVatTaxTypes",
    "name": "Load VAT tax types",
    "category": "Reference data",
    "method": "GET",
    "path": "/rest/vat_tax_type",
    "parameters": [],
    "usage": "info",
    "requestBody": {
      "schema": {},
      "description": "No request body required for this lookup."
    },
    "requestFields": [],
    "responseBody": {
      "schema": {
        "vatTaxTypes": [
          {
            "code": "VAT_ABLE",
            "description": "Goods and services subject to VAT"
          }
        ]
      },
      "description": "Reference list of VAT tax type codes."
    },
    "responseFields": [
      {
        "field": "vatTaxTypes[]",
        "description": "Array of supported VAT tax type codes."
      },
      {
        "field": "vatTaxTypes[].code",
        "description": "Tax type identifier returned by POSAPI."
      },
      {
        "field": "vatTaxTypes[].description",
        "description": "Description of when the tax type is used."
      }
    ],
    "fieldDescriptions": {
      "vatTaxTypes": "Array of supported VAT tax type codes.",
      "vatTaxTypes[].code": "Tax type identifier returned by POSAPI.",
      "vatTaxTypes[].description": "Description of when the tax type is used."
    },
    "testable": true,
    "testServerUrl": "https://posapi-test.tax.gov.mn"
  },
  {
    "id": "getBankAccountInfo",
    "name": "Fetch bank settlement accounts",
    "category": "Administration",
    "method": "GET",
    "path": "/rest/getBankAccountInfo",
    "parameters": [],
    "usage": "admin",
    "requestBody": {
      "schema": {},
      "description": "No request body required for this lookup."
    },
    "requestFields": [],
    "responseBody": {
      "schema": {
        "bankAccounts": [
          {
            "bankName": "State Bank",
            "accountNo": "190000000000",
            "currency": "MNT"
          }
        ]
      },
      "description": "Bank accounts configured on the POSAPI instance."
    },
    "responseFields": [
      {
        "field": "bankAccounts[]",
        "description": "List of bank accounts configured in POSAPI."
      },
      {
        "field": "bankAccounts[].bankName",
        "description": "Bank name for the configured account."
      },
      {
        "field": "bankAccounts[].accountNo",
        "description": "Account number registered with the tax authority."
      },
      {
        "field": "bankAccounts[].currency",
        "description": "Currency code for the account (e.g., MNT)."
      }
    ],
    "fieldDescriptions": {
      "bankAccounts": "List of bank accounts configured in POSAPI.",
      "bankAccounts[].bankName": "Bank name for the configured account.",
      "bankAccounts[].accountNo": "Account number registered with the tax authority.",
      "bankAccounts[].currency": "Currency code for the account (e.g., MNT)."
    },
    "testable": true,
    "testServerUrl": "https://posapi-test.tax.gov.mn"
  },
  {
    "id": "getBranchInfo",
    "name": "Fetch registered branch info",
    "category": "Administration",
    "method": "GET",
    "path": "/rest/getBranchInfo",
    "parameters": [],
    "usage": "admin",
    "requestBody": {
      "schema": {},
      "description": "No request body required for this lookup."
    },
    "requestFields": [],
    "responseBody": {
      "schema": {
        "branches": [
          {
            "branchNo": "001",
            "name": "Main branch",
            "address": "Sukhbaatar district, Ulaanbaatar"
          }
        ]
      },
      "description": "Branches licensed for issuing POSAPI receipts."
    },
    "responseFields": [
      {
        "field": "branches[]",
        "description": "Array of branches registered in POSAPI."
      },
      {
        "field": "branches[].branchNo",
        "description": "Branch number issued with the licence."
      },
      {
        "field": "branches[].name",
        "description": "Branch display name."
      },
      {
        "field": "branches[].address",
        "description": "Physical address recorded for the branch."
      }
    ],
    "fieldDescriptions": {
      "branches": "Array of branches registered in POSAPI.",
      "branches[].branchNo": "Branch number issued with the licence.",
      "branches[].name": "Branch display name.",
      "branches[].address": "Physical address recorded for the branch."
    },
    "testable": true,
    "testServerUrl": "https://posapi-test.tax.gov.mn"
  }
]
