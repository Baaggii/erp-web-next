[
  {
    "id": "posapiAuth",
    "name": "POSAPI Authentication",
    "category": "Authentication",
    "method": "POST",
    "path": "/auth/realms/posapi/protocol/openid-connect/token",
    "parameters": [],
    "posApiType": "AUTH",
    "usage": "admin",
    "testable": true,
    "testServerUrl": "https://posapi-test.tax.gov.mn",
    "testServerUrlProduction": "https://posapi.tax.gov.mn",
    "requestBody": {
      "schema": {
        "grant_type": "password",
        "client_id": "POSAPI_CLIENT_ID",
        "username": "demo@example.com",
        "password": "your-password"
      },
      "description": "Request an OAuth2 access token to authorise POSAPI test calls."
    },
    "responseBody": {
      "schema": {
        "access_token": "string",
        "refresh_token": "string",
        "expires_in": 3600
      },
      "description": "Bearer token payload returned by the POSAPI authentication endpoint."
    },
    "requestFields": [
      {
        "field": "grant_type",
        "required": true,
        "description": "OAuth grant type (password)."
      },
      {
        "field": "client_id",
        "required": true,
        "description": "Registered POSAPI client identifier."
      },
      {
        "field": "username",
        "required": true,
        "description": "Service username used for POSAPI authentication."
      },
      {
        "field": "password",
        "required": true,
        "description": "Service password used for POSAPI authentication."
      }
    ],
    "responseFields": [
      {
        "field": "access_token",
        "required": true,
        "description": "Bearer token to include in Authorization headers."
      },
      {
        "field": "expires_in",
        "required": true,
        "description": "Token lifetime in seconds."
      },
      {
        "field": "refresh_token",
        "required": false,
        "description": "Refresh token used to obtain a new access token."
      }
    ],
    "supportsItems": false,
    "supportsMultiplePayments": false,
    "notes": "Authentication endpoint imported from the government auth specification."
  },
  {
    "id": "saveReceipt",
    "name": "Save B2C/B2B Receipt",
    "category": "Receipts & Invoices",
    "method": "POST",
    "path": "/rest/receipt",
    "parameters": [],
    "posApiType": "B2C",
    "usage": "transaction",
    "settingsId": "defaultTransaction",
    "defaultForForm": true,
    "supportsItems": true,
    "notes": "Handles goods and service transactions. Include item rows for goods or leave the items array empty for service-only receipts.",
    "requestBody": {
      "schema": {
        "branchNo": "001",
        "posNo": "001",
        "merchantTin": "37900846788",
        "type": "B2C",
        "taxType": "VAT_ABLE",
        "consumerNo": "10038071",
        "customerTin": null,
        "totalAmount": 15100,
        "totalVAT": 500,
        "totalCityTax": 100,
        "receipts": [
          {
            "taxType": "VAT_ABLE",
            "totalAmount": 5600,
            "totalVAT": 500,
            "totalCityTax": 100,
            "items": [
              {
                "name": "Талх",
                "barCode": "19059010880001",
                "barCodeType": "GS1",
                "classificationCode": "2349010",
                "taxProductCode": null,
                "measureUnit": "ш",
                "qty": 1,
                "unitPrice": 5000,
                "totalAmount": 5600,
                "totalVAT": 500,
                "totalCityTax": 100
              }
            ]
          },
          {
            "taxType": "VAT_ZERO",
            "totalAmount": 7000,
            "totalVAT": 0,
            "items": []
          },
          {
            "taxType": "NO_VAT",
            "totalAmount": 2500,
            "totalVAT": 0,
            "items": [
              {
                "name": "Засвар үйлчилгээ",
                "qty": 1,
                "unitPrice": 2500,
                "totalAmount": 2500
              }
            ]
          }
        ],
        "payments": [
          {
            "code": "CASH",
            "status": "PAID",
            "paidAmount": 4000
          },
          {
            "code": "PAYMENT_CARD",
            "status": "PAID",
            "paidAmount": 600,
            "data": {
              "terminalID": "11111",
              "rrn": "123456789123",
              "maskedCardNumber": "123456XXXXXX7890",
              "easy": true
            }
          },
          {
            "code": "PAYMENT_CARD",
            "status": "PAID",
            "paidAmount": 1000,
            "data": {
              "terminalID": "111",
              "rrn": "123456789121",
              "maskedCardNumber": "123456XXXXXX7891",
              "easy": false
            }
          },
          {
            "code": "BANK_TRANSFER",
            "status": "PENDING",
            "paidAmount": 9500,
            "reference": "BT2024-0001"
          }
        ]
      },
      "description": "Batch of receipts with payments and items grouped by tax type"
    },
    "requestFields": [
      {
        "field": "type",
        "required": true,
        "description": "POSAPI payload type (B2C, B2B_SALE, B2B_PURCHASE, STOCK_QR)."
      },
      {
        "field": "taxType",
        "required": true,
        "description": "Default tax type for the payload (VAT_ABLE, VAT_FREE, VAT_ZERO, NO_VAT)."
      },
      {
        "field": "branchNo",
        "required": true,
        "description": "Three digit branch identifier issued with the licence."
      },
      {
        "field": "posNo",
        "required": true,
        "description": "POS terminal identifier registered with the tax authority."
      },
      {
        "field": "merchantTin",
        "required": true,
        "description": "Registered TIN of the merchant submitting the receipt."
      },
      {
        "field": "consumerNo",
        "required": false,
        "description": "Citizen registry or phone number for B2C receipts. Required when type is B2C."
      },
      {
        "field": "customerTin",
        "required": false,
        "description": "Buyer TIN for B2B receipts. Required when type is B2B."
      },
      {
        "field": "totalAmount",
        "required": true,
        "description": "Total invoice amount including tax."
      },
      {
        "field": "totalVAT",
        "required": true,
        "description": "VAT amount for the transaction when taxType is VAT_ABLE."
      },
      {
        "field": "totalCityTax",
        "required": false,
        "description": "City tax amount for VAT_ABLE receipts when applicable."
      },
      {
        "field": "receipts[]",
        "required": true,
        "description": "Array of receipt groups organised by POSAPI tax type."
      },
      {
        "field": "receipts[].items[]",
        "required": false,
        "description": "Line items that include product codes, quantities, prices, and tax data. Leave empty when submitting services."
      },
      {
        "field": "payments[]",
        "required": true,
        "description": "Breakdown of payment methods applied to the receipt or invoice."
      },
      {
        "field": "payments[].type",
        "required": true,
        "description": "Payment method code. Supported values: CASH, PAYMENT_CARD, BANK_TRANSFER, MOBILE_WALLET, EASY_BANK_CARD, SERVICE_PAYMENT."
      },
      {
        "field": "payments[].amount",
        "required": true,
        "description": "Amount paid with the selected payment method."
      }
    ],
    "responseBody": {
      "schema": {
        "status": "SUCCESS",
        "message": "Receipt registered",
        "receipts": [
          {
            "billId": "2024-000123",
            "lottery": "АБ12345678",
            "qrData": "https://posapi-test.tax.gov.mn/verify/...",
            "receiptNumbers": [
              "12345678"
            ],
            "errors": []
          }
        ]
      },
      "description": "Receipt submission response"
    },
    "responseFields": [
      {
        "field": "status",
        "description": "Execution status returned by POSAPI (SUCCESS or ERROR)."
      },
      {
        "field": "message",
        "description": "Human-readable description of the operation result."
      },
      {
        "field": "receipts[].billId",
        "description": "Unique bill identifier registered by POSAPI."
      },
      {
        "field": "receipts[].lottery",
        "description": "Lottery number to be printed on the receipt."
      },
      {
        "field": "receipts[].qrData",
        "description": "QR payload containing encoded receipt verification data."
      },
      {
        "field": "receipts[].receiptNumbers[]",
        "description": "List of receipt numbers assigned per tax authority rules."
      }
    ],
    "testable": true,
    "testServerUrl": "https://posapi-test.tax.gov.mn"
  },
  {
    "id": "verifyCustomerTin",
    "name": "Verify customer TIN",
    "category": "Reference data",
    "method": "GET",
    "path": "/rest/verifyCustomerTin",
    "parameters": [
      {
        "name": "customerTin",
        "in": "query",
        "required": true,
        "description": "Customer tax identification number to validate."
      }
    ],
    "usage": "info",
    "requestBody": {
      "schema": {},
      "description": "TIN validation is performed via query parameters."
    },
    "requestFields": [
      {
        "field": "customerTin",
        "required": true,
        "description": "Customer tax identification number to validate."
      }
    ],
    "responseBody": {
      "schema": {
        "valid": true,
        "name": "Acme LLC",
        "status": "ACTIVE"
      },
      "description": "Indicates whether the provided TIN is valid and the registered entity name."
    },
    "responseFields": [
      {
        "field": "valid",
        "description": "Boolean flag indicating if the TIN is valid."
      },
      {
        "field": "name",
        "description": "Registered entity name when available."
      },
      {
        "field": "status",
        "description": "Tax authority status for the entity (e.g., ACTIVE)."
      }
    ],
    "testable": true,
    "testServerUrl": "https://posapi-test.tax.gov.mn"
  },
  {
    "id": "getInformation",
    "name": "List pending receipts",
    "category": "Monitoring",
    "method": "GET",
    "path": "/rest/getInformation",
    "parameters": [
      {
        "name": "startDate",
        "in": "query",
        "required": false,
        "description": "Filter results starting from this date (YYYY-MM-DD)."
      },
      {
        "name": "endDate",
        "in": "query",
        "required": false,
        "description": "Filter results until this date (YYYY-MM-DD)."
      },
      {
        "name": "page",
        "in": "query",
        "required": false,
        "description": "Page number when paginating long-running queues."
      }
    ],
    "usage": "info",
    "requestBody": {
      "schema": {},
      "description": "No request body required for GET endpoints."
    },
    "requestFields": [
      {
        "field": "startDate",
        "required": false,
        "description": "Optional filter for the queue start date (YYYY-MM-DD)."
      },
      {
        "field": "endDate",
        "required": false,
        "description": "Optional filter for the queue end date (YYYY-MM-DD)."
      },
      {
        "field": "page",
        "required": false,
        "description": "Page number for paginated responses."
      }
    ],
    "responseBody": {
      "schema": {
        "status": "SUCCESS",
        "receipts": [
          {
            "billId": "2024-000124",
            "lottery": "АБ12345679",
            "amount": 65000,
            "status": "QUEUED",
            "createdDate": "2024-04-12T14:21:00+08:00"
          }
        ]
      },
      "description": "Receipts queued on the POSAPI server awaiting acknowledgement."
    },
    "responseFields": [
      {
        "field": "status",
        "description": "Execution status returned by POSAPI."
      },
      {
        "field": "receipts[].billId",
        "description": "Queued receipt identifier."
      },
      {
        "field": "receipts[].status",
        "description": "POSAPI queue status such as QUEUED or SENT."
      },
      {
        "field": "receipts[].amount",
        "description": "Total amount of the queued receipt."
      },
      {
        "field": "receipts[].createdDate",
        "description": "Date the receipt was created or queued."
      }
    ],
    "testable": true,
    "testServerUrl": "https://posapi-test.tax.gov.mn"
  },
  {
    "id": "getDistrictCodes",
    "name": "Load district codes",
    "category": "Reference data",
    "method": "GET",
    "path": "/rest/getDistrictCode",
    "parameters": [],
    "usage": "info",
    "requestBody": {
      "schema": {},
      "description": "No request body required for this lookup."
    },
    "requestFields": [],
    "responseBody": {
      "schema": {
        "districts": [
          {
            "code": "1512",
            "name": "Sukhbaatar district",
            "city": "Ulaanbaatar"
          }
        ]
      },
      "description": "Reference list of tax districts."
    },
    "responseFields": [
      {
        "field": "districts[]",
        "description": "Array of available district codes."
      },
      {
        "field": "districts[].code",
        "description": "District code used when registering receipts."
      },
      {
        "field": "districts[].name",
        "description": "Human-readable district name."
      },
      {
        "field": "districts[].city",
        "description": "City or province that owns the district."
      }
    ],
    "testable": true,
    "testServerUrl": "https://posapi-test.tax.gov.mn"
  },
  {
    "id": "getVatTaxTypes",
    "name": "Load VAT tax types",
    "category": "Reference data",
    "method": "GET",
    "path": "/rest/vat_tax_type",
    "parameters": [],
    "usage": "info",
    "requestBody": {
      "schema": {},
      "description": "No request body required for this lookup."
    },
    "requestFields": [],
    "responseBody": {
      "schema": {
        "vatTaxTypes": [
          {
            "code": "VAT_ABLE",
            "description": "Goods and services subject to VAT"
          }
        ]
      },
      "description": "Reference list of VAT tax type codes."
    },
    "responseFields": [
      {
        "field": "vatTaxTypes[]",
        "description": "Array of supported VAT tax type codes."
      },
      {
        "field": "vatTaxTypes[].code",
        "description": "Tax type identifier returned by POSAPI."
      },
      {
        "field": "vatTaxTypes[].description",
        "description": "Description of when the tax type is used."
      }
    ],
    "testable": true,
    "testServerUrl": "https://posapi-test.tax.gov.mn"
  },
  {
    "id": "getBankAccountInfo",
    "name": "Fetch bank settlement accounts",
    "category": "Administration",
    "method": "GET",
    "path": "/rest/getBankAccountInfo",
    "parameters": [],
    "usage": "admin",
    "requestBody": {
      "schema": {},
      "description": "No request body required for this lookup."
    },
    "requestFields": [],
    "responseBody": {
      "schema": {
        "bankAccounts": [
          {
            "bankName": "State Bank",
            "accountNo": "190000000000",
            "currency": "MNT"
          }
        ]
      },
      "description": "Bank accounts configured on the POSAPI instance."
    },
    "responseFields": [
      {
        "field": "bankAccounts[]",
        "description": "List of bank accounts configured in POSAPI."
      },
      {
        "field": "bankAccounts[].bankName",
        "description": "Bank name for the configured account."
      },
      {
        "field": "bankAccounts[].accountNo",
        "description": "Account number registered with the tax authority."
      },
      {
        "field": "bankAccounts[].currency",
        "description": "Currency code for the account (e.g., MNT)."
      }
    ],
    "testable": true,
    "testServerUrl": "https://posapi-test.tax.gov.mn"
  },
  {
    "id": "getBranchInfo",
    "name": "Fetch registered branch info",
    "category": "Administration",
    "method": "GET",
    "path": "/rest/getBranchInfo",
    "parameters": [],
    "usage": "admin",
    "requestBody": {
      "schema": {},
      "description": "No request body required for this lookup."
    },
    "requestFields": [],
    "responseBody": {
      "schema": {
        "branches": [
          {
            "branchNo": "001",
            "name": "Main branch",
            "address": "Sukhbaatar district, Ulaanbaatar"
          }
        ]
      },
      "description": "Branches licensed for issuing POSAPI receipts."
    },
    "responseFields": [
      {
        "field": "branches[]",
        "description": "Array of branches registered in POSAPI."
      },
      {
        "field": "branches[].branchNo",
        "description": "Branch number issued with the licence."
      },
      {
        "field": "branches[].name",
        "description": "Branch display name."
      },
      {
        "field": "branches[].address",
        "description": "Physical address recorded for the branch."
      }
    ],
    "testable": true,
    "testServerUrl": "https://posapi-test.tax.gov.mn"
  }
]
